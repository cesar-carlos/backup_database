{
  "permissions": {
    "allow": [
      "Bash(flutter analyze:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(dart fix:*)",
      "Bash(dart format:*)",
      "Bash(dart pub:*)",
      "Bash(tree:*)",
      "WebSearch",
      "Bash(flutter pub get:*)",
      "Bash(flutter test:*)",
      "Bash(git restore:*)",
      "Bash(grep:*)",
      "Bash(flutter build:*)",
      "Bash(start \"\" \"build\\\\windows\\\\x64\\\\runner\\\\Release\\\\backup_database.exe\")",
      "Bash(start \"\" \"D:\\\\Developer\\\\Flutter\\\\backup_database\\\\build\\\\windows\\\\x64\\\\runner\\\\Release\\\\backup_database.exe\")",
      "Bash(timeout:*)",
      "Bash(exit:*)",
      "Bash(ping:*)",
      "Bash(git checkout:*)",
      "Bash(wc:*)",
      "Bash(dart run build_runner build:*)",
      "Bash(cloc:*)",
      "Bash(find:*)",
      "Bash(del:*)",
      "Bash(flutter run:*)",
      "Bash(cat:*)",
      "Bash(nc:*)",
      "Bash(taskkill:*)",
      "Bash(curl:*)",
      "Bash(where ISCC.exe)",
      "Bash(dir \"C:\\\\Program Files \\(x86\\)\\\\Inno Setup 6\\\\ISCC.exe\")",
      "Bash(dir:*)",
      "Bash(dir \"C:\\\\Program Files \\(x86\\)\\\\Inno Setup 5\\\\ISCC.exe\")",
      "Bash(\"C:\\\\Program Files \\(x86\\)\\\\Inno Setup 6\\\\ISCC.exe\":*)",
      "Bash(findstr:*)",
      "Bash(powershell:*)",
      "Bash(explorer \"D:\\\\Developer\\\\Flutter\\\\backup_database\\\\installer\\\\dist\")",
      "Bash(Start-Sleep -Seconds 3)",
      "Bash(Select-String \"9527\")",
      "Bash(Select-String:*)",
      "Bash(cd:*)",
      "Bash(Stop-Process -Name \"backup_database\" -Force -ErrorAction SilentlyContinue)",
      "Bash(Start-Sleep -Seconds 2)",
      "Bash(Get-Process backup_database -ErrorAction SilentlyContinue)",
      "Bash(Select-Object:*)",
      "Bash(flutter clean:*)",
      "Bash(dart test:*)",
      "Bash(Get-ChildItem -Path . -Filter *.ps1)",
      "Bash(ls:*)",
      "Bash(Get-Content 'TESTING_SERVER_CLIENT.md' -Raw)",
      "Bash(ForEach-Object {)",
      "Bash(})",
      "Bash(Set-Content 'TESTING_SERVER_CLIENT.md' -NoNewline)",
      "Bash(\")",
      "Bash(dart analyze:*)",
      "Bash(printf:*)",
      "Bash(echo:*)",
      "Bash(explorer \"D:\\\\Developer\\\\Flutter\\\\backup_database\\\\build\\\\windows\\\\x64\\\\runner\\\\Release\")",
      "Bash(dir \"D:\\\\Developer\\\\Flutter\\\\backup_database\\\\build\\\\windows\\\\x64\\\\runner\\\\Release\")",
      "Bash(git branch:*)",
      "Bash(python3:*)",
      "Bash(xxd:*)",
      "Bash(python << 'EOF'\nimport re\n\nwith open\\('lib/infrastructure/external/process/sql_server_backup_service.dart', 'r', encoding='utf-8'\\) as f:\n    content = f.read\\(\\)\n    \n# 1. Adicionar import de BackupFlags\ncontent = re.sub\\(\n    r\"import 'package:backup_database/domain/entities/verify_policy.dart';\\\\nimport 'package:backup_database/domain/services/backup_execution_result.dart';\",\n    r\"import 'package:backup_database/domain/entities/backup_flags.dart';\\\\nimport 'package:backup_database/domain/entities/verify_policy.dart';\\\\nimport 'package:backup_database/domain/services/backup_execution_result.dart';\",\n    content\n\\)\n\nwith open\\('lib/infrastructure/external/process/sql_server_backup_service.dart', 'w', encoding='utf-8'\\) as f:\n    f.write\\(content\\)\nEOF)",
      "Bash(python << 'EOF'\nimport re\n\nwith open\\('lib/infrastructure/external/process/sql_server_backup_service.dart', 'r', encoding='utf-8'\\) as f:\n    content = f.read\\(\\)\n\n# 2. Adicionar declaração verifyStopwatch após stopwatch e adicionar código de métricas\ncontent = re.sub\\(\n    r'final stopwatch = Stopwatch\\\\\\(\\\\\\)\\\\.\\\\.start\\\\\\(\\\\\\);\\\\nfinal result = await _processService\\\\.run\\\\\\(',\n    r'final stopwatch = Stopwatch\\(\\)..start\\(\\);\\\\nStopwatch? verifyStopwatch;\\\\nfinal result = await _processService.run\\(',\n    content\n\\)\n\n# 3. Adicionar import de BackupMetrics no topo \\(se não existir\\)\nif \"import 'package:backup_database/domain/entities/backup_metrics.dart';\" not in content:\n    content = re.sub\\(\n        r\"\\(import 'package:backup_database/domain/entities/backup_type.dart';\\\\n\\)\",\n        r\"import 'package:backup_database/domain/entities/backup_metrics.dart';\\\\nimport 'package:backup_database/domain/entities/backup_type.dart';\",\n        content\n    \\)\n\n# 4. Substituir o retorno do rd.Success para incluir métricas\ncontent = re.sub\\(\n    r'return rd\\\\.Success\\\\\\(\\\\n\\\\s+BackupExecutionResult\\\\\\(\\(\\\\s+\\)\\\\\\\\n\\\\s+backupPath: primaryBackupPath,\\\\\\\\n\\\\s+fileSize: totalFileSize,\\\\\\\\n\\\\s+duration: stopwatch\\\\.elapsed,\\\\\\\\n\\\\s+databaseName: config\\\\.databaseValue,\\\\\\\\n\\\\s+\\\\\\),',\n    r'return rd.Success\\(\\\\n\\\\s+BackupExecutionResult\\(\\(\\\\n\\\\s+backupPath: primaryBackupPath,\\\\n\\\\s+fileSize: totalFileSize,\\\\n\\\\s+duration: totalDuration,\\\\n\\\\s+databaseName: config.databaseValue,\\\\n\\\\s+metrics: BackupMetrics\\(\\\\n\\\\s+totalDuration: totalDuration,\\\\n\\\\s+backupDuration: backupDuration,\\\\n\\\\s+verifyDuration: verifyDuration,\\\\n\\\\s+backupSizeBytes: totalFileSize,\\\\n\\\\s+backupSpeedMbPerSec: backupSpeedMbPerSec,\\\\n\\\\s+backupType: backupType.name,\\\\n\\\\s+flags: flags,\\\\\\\\n\\\\s+\\\\\\)\\),',\n    content\n\\)\n\nwith open\\('lib/infrastructure/external/process/sql_server_backup_service.dart', 'w', encoding='utf-8'\\) as f:\n    f.write\\(content\\)\nEOF)",
      "Bash(python:*)",
      "WebFetch(domain:pub.dev)",
      "Bash(git pull:*)"
    ]
  }
}
